<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="description"
      content="A modern, fast, and beautiful Hacker News client"
    />
    <meta name="theme-color" content="#ff6600" />

    <title>HackerNews - Modern Client</title>

    <!-- Preconnect to API -->
    <link rel="preconnect" href="https://hacker-news.firebaseio.com" />

    <!-- Favicon -->
    <link
      rel="icon"
      type="image/svg+xml"
      href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ðŸ“°</text></svg>"
    />

    <!-- Styles -->
    <link rel="stylesheet" href="src/css/variables.css" />
    <link rel="stylesheet" href="src/css/base.css" />
    <link rel="stylesheet" href="src/css/components.css" />
    <link rel="stylesheet" href="src/css/animations.css" />

    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json" />

    <!-- Apple Touch Icon -->
    <link
      rel="apple-touch-icon"
      href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ðŸ“°</text></svg>"
    />
  </head>
  <body>
    <!-- Header -->
    <header class="app-header" role="banner">
      <div class="header-container">
        <div class="header-brand">
          <svg
            class="logo"
            width="32"
            height="32"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2.5"
            stroke-linecap="round"
            stroke-linejoin="round"
          >
            <polyline points="4 17 10 11 4 5"></polyline>
            <line x1="12" y1="19" x2="20" y2="19"></line>
          </svg>
          <h1 class="brand-title">hn<span>kit</span></h1>
        </div>

        <div class="header-controls">
          <!-- Search -->
          <div class="search-box">
            <svg
              width="18"
              height="18"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <circle cx="11" cy="11" r="8" />
              <path d="m21 21-4.35-4.35" />
            </svg>
            <input
              type="search"
              id="searchInput"
              placeholder="Search..."
              aria-label="Search stories"
              autocomplete="off"
            />
            <kbd class="search-hint">/</kbd>
          </div>

          <!-- Feed Selector -->
          <select id="feedSelect" class="feed-select" aria-label="Select feed">
            <option value="topstories">Top</option>
            <option value="newstories">New</option>
            <option value="beststories">Best</option>
            <option value="askstories">Ask</option>
            <option value="showstories">Show</option>
            <option value="jobstories">Jobs</option>
          </select>

          <!-- Theme Selector -->
          <select
            id="themeSelect"
            class="theme-select"
            aria-label="Select theme"
            title="Select theme"
          >
            <option value="dark">Dark</option>
            <option value="light">Light</option>
            <option value="oled">OLED</option>
            <option value="nord">Nord</option>
            <option value="hacker">Hacker</option>
          </select>
        </div>
      </div>

      <!-- Loading Bar -->
      <div class="loading-bar" id="loadingIndicator">
        <div class="loading-bar-progress"></div>
      </div>
    </header>

    <!-- Main Content -->
    <main class="app-main" role="main">
      <div class="main-container">
        <div class="stories-section">
          <div id="itemsList" class="stories-list">
            <!-- Stories will be dynamically inserted here -->
          </div>
        </div>
      </div>
    </main>

    <!-- Modal -->
    <div
      id="modal"
      class="modal"
      role="dialog"
      aria-modal="true"
      aria-hidden="true"
    >
      <div class="modal-backdrop"></div>
      <div class="modal-container">
        <div class="modal-header">
          <button id="modalClose" class="modal-close" aria-label="Close modal">
            <svg
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <line x1="18" y1="6" x2="6" y2="18" />
              <line x1="6" y1="6" x2="18" y2="18" />
            </svg>
          </button>
        </div>
        <div id="modalContent" class="modal-content">
          <!-- Dynamic content -->
        </div>
      </div>
    </div>

    <!-- Toast Container -->
    <div
      id="errorContainer"
      class="toast-container"
      aria-live="polite"
      aria-atomic="true"
    ></div>

    <!-- Back to Top -->
    <button
      id="backToTop"
      class="back-to-top"
      aria-label="Back to top"
      title="Back to top"
    >
      <svg
        width="24"
        height="24"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
      >
        <line x1="12" y1="19" x2="12" y2="5" />
        <polyline points="5 12 12 5 19 12" />
      </svg>
    </button>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/dompurify@3.0.8/dist/purify.min.js"></script>
    <script src="simple-api.js"></script>
    <script src="simple-app.js"></script>

    <!-- Service Worker Registration -->
    <script>
      if ("serviceWorker" in navigator) {
        window.addEventListener("load", () => {
          navigator.serviceWorker.register("sw.js").catch(() => {});
        });
      }

      // Back to top button
      const backToTop = document.getElementById("backToTop");

      window.addEventListener("scroll", () => {
        const currentScroll = window.pageYOffset;

        if (currentScroll > 400) {
          backToTop.classList.add("visible");
        } else {
          backToTop.classList.remove("visible");
        }
      });

      backToTop.addEventListener("click", () => {
        window.scrollTo({ top: 0, behavior: "smooth" });
      });
    </script>
  </body>
</html>
